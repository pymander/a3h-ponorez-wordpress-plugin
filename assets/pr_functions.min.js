function external_urlEncode(g){if(typeof g=="undefined"){return""}var c="";var a=0;g=g.toString();var f=/(^[a-zA-Z0-9_.]*)/;while(a<g.length){var d=f.exec(g.substr(a));if(d!=null&&d.length>1&&d[1]!=""){c+=d[1];a+=d[1].length}else{if(g[a]==" "||g.charCodeAt(a).toString(16).toUpperCase()=="20"||g.charCodeAt(a).toString(16).toUpperCase()=="A0"){c+="+"}else{var b=g.charCodeAt(a);var e=b.toString(16);c+="%"+(e.length<2?"0":"")+e.toUpperCase()}a++}}return c}function external_trim(a){if(typeof(a)!="string"){return a}return a.replace(/^\s+|\s+$/g,"")}function checkpositivenumber(a){var b=/^\d+$/;return b.test(a)}function checkdate(){if(document.getElementById("date").value.length==0){alert("Please select activity date");return false}return true}function checkupgrade(e,c,b,d,a){e=external_trim(e);if(!checkpositivenumber(e)){alert("Please enter valid upgrade amount(s)");return false}if(e!=0&&c){alert("Sorry, it's too late to book "+a);return false}if(b&&parseInt(e)>d){alert("Sorry, only "+d+" "+a+"(s) available");return false}return true}var ismobileapp=false;var isIframe=false;var cancellationPolicyConfirmed=false;var query="";var reservationmode="";var activitydate="";var googleanalyticsaccount="";var guestCountMap;var mode2Setup;var upgradeCountMap;var seats1;var seats2;var seats3;var seats4;var seats5;function setMobileApp(){ismobileapp=true}function setIframe(){isIframe=true}function checkcancellation(a){cancellationPolicyConfirmed=false;if(!a.checked){alert("You must check the box acknowledging reading & accepting our Terms & Conditions");return false}cancellationPolicyConfirmed=true;return true}function setCancellationPolicyConfirmed(){cancellationPolicyConfirmed=true}function reservation(b,a,c,d,e){reservation_init(b,a,c,d,e,0,e,0,e,0,e,0,e,0,e,e,window.location.href)}function reservation2(c,p,b,d,o,m,n,l,k,j,i,h,g,f,a,e){reservation_init(c,p,b,d,o,m,n,l,k,j,i,h,g,f,a,e,window.location.href)}function reservation_init(d,q,b,e,p,n,o,m,l,k,j,i,h,g,a,f,c){query="&referer="+external_urlEncode(c)+"&activityid="+external_urlEncode(q)+(b!=undefined?"&date="+external_urlEncode(b):"");reservationmode="";activitydate=external_trim(b);guestCountMap={};mode2Setup=false;upgradeCountMap={};seats1=0;seats2=0;seats3=0;seats4=0;seats5=0}function setGiftCertificate(){reservationmode="giftcertificate"}function addGuests(b,a){if(!mode2Setup){query=query+"&externalpurchasemode=2";mode2Setup=true}if(a==0){return}query=query+"&guests_t"+b+"="+external_urlEncode(external_trim(a));guestCountMap[b]=external_trim(a)}function addUpgrades(a,b){if(b==0){return}query=query+"&upgrades_u"+a+"="+external_urlEncode(external_trim(b));upgradeCountMap[a]=external_trim(b)}function setUpgradesFixed(){query=query+"&upgradesfixed=1"}function setHotel(a){query=query+"&hotelid="+external_urlEncode(a)}function setRoom(a){query=query+"&room="+external_urlEncode(external_trim(a))}function setTransportationRoute(a){query=query+"&transportationrouteid="+external_urlEncode(a)}function setAccommodationFixed(){query=query+"&accommodationfixed=1"}function setdiscount(a){query=query+"&discountcode="+external_urlEncode(a)}function setagency(a){query=query+"&agencyid="+a}function setgoldcard(a){query=query+"&goldcardnumber="+external_urlEncode(external_trim(a))}function setpromotionalcode(a){query=query+"&promotionalcode="+external_urlEncode(external_trim(a))}function setpaylater(a){query=query+"&paylater="+a}function setlanguage(a){query=query+"&language="+a}function setgoogleanalytics(a){googleanalyticsaccount=a;query=query+"&googleanalyticsaccount="+external_urlEncode(a)}function addseats1(b,c,a){query=query+"&seats1="+external_urlEncode(external_trim(b));seats1=external_trim(b)}function addseats2(b,c,a){query=query+"&seats2="+external_urlEncode(external_trim(b));seats2=external_trim(b)}function addseats3(b,c,a){query=query+"&seats3="+external_urlEncode(external_trim(b));seats3=external_trim(b)}function addseats4(b,c,a){query=query+"&seats4="+external_urlEncode(external_trim(b));seats4=external_trim(b)}function addseats5(b,c,a){query=query+"&seats5="+external_urlEncode(external_trim(b));seats5=external_trim(b)}function addseatsfromselect(a){var c=a.options[a.selectedIndex].value;if(c.match(/^t(\d+)$/)){var b=RegExp.$1;addGuests(b,1)}else{query=query+"&seats"+c+"=1";if(c=="1"){seats1=1}if(c=="2"){seats2=1}if(c=="3"){seats3=1}if(c=="4"){seats4=1}if(c=="5"){seats5=1}}}function addextras(b,c,d,a){}function getBaseUrl(){var b=/^(.*[\/\\])external\/functions\.js(?:\?|$)/;var a=document.getElementsByTagName("script");for(var c=0;c<a.length;c++){var d=a[c].src;if(d&&d.match(b)){return RegExp.$1}}return""}function getJsVersion(){var a=document.getElementsByTagName("script");for(var b=0;b<a.length;++b){if(a[b].src&&/external\/functions.js\?(?:.*&)?jsversion=([^&]+)(?:&|$)/.test(a[b].src)){return RegExp.$1}}return""}var baseurl="https://www.hawaiifun.org/reservation/";if(getBaseUrl().match(/^https?:\/\/[a-z]+[:\/]/)||getBaseUrl().match(/reservation_test/)){baseurl=getBaseUrl()}var jsVersion=getJsVersion();function external_additionalQueryParams(){var a="";if(cancellationPolicyConfirmed){a+="&policy=1"}return a}function availability_popup(){if(!external_validateActivityInfo()){return}var a="AVAILABILITYCHECKPAGE";if(reservationmode=="giftcertificate"){a="GIFTCERTIFICATESELECTUPGRADES"}var b=window.open("","_blank","width=800,height=200,scrollbars=yes,resizable=yes,top=100,left=100").document;b.open("text/html","replace");b.write("<html><head><script type='text/javascript'>var q='"+query+external_additionalQueryParams()+"';<\/script><script type='text/javascript' src='"+baseurl+"common/jquery/jquery-1.9.1.min.js'><\/script><script type='text/javascript' src='"+baseurl+"external/functions.js?jsversion="+jsVersion+"'><\/script><script type='text/javascript' src='"+baseurl+"externalservlet?action="+a+query+external_additionalQueryParams()+"'><\/script>"+(googleanalyticsaccount==""?"":"<script src='https://ssl.google-analytics.com/ga.js' type='text/javascript'><\/script><script type='text/javascript'>try { pageTracker = _gat._getTracker('"+googleanalyticsaccount+"'); pageTracker._setAllowLinker(true); pageTracker._setAllowHash(false); pageTracker._trackPageview(); } catch(err) {}<\/script>")+"</head><body onload='javascript:showContent();'><table width='100%' height=170><tr><td width=100% valign=center align=center><b>C h e c k i n g . . .</b></td></tr></table></body></html>");b.close()}function availability_iframe(){if(!external_validateActivityInfo()){return}var b="AVAILABILITYCHECKPAGE";if(reservationmode=="giftcertificate"){b="GIFTCERTIFICATESELECTUPGRADES"}try{if(window.A3HE){var a=baseurl+"externalservlet?action="+b+"&iframe=1"+query+external_additionalQueryParams();window.A3HE.open({url:a});return}}catch(c){}availability_popup()}function availability_iframe_popup(){var a=false;(function(b){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4))){a=true}})(navigator.userAgent||navigator.vendor||window.opera);if(a){availability_popup()}else{availability_iframe()}}function availability_page(){if(!external_validateActivityInfo()){return}var a="AVAILABILITYCHECKPAGE";if(reservationmode=="giftcertificate"){a="GIFTCERTIFICATESELECTUPGRADES"}window.document.location=baseurl+"externalservlet?action="+a+"&mobileapp=1"+query+external_additionalQueryParams()}function external_validateActivityInfo(){if(!reservationmode){var g=document.getElementById("mode");if(g!=undefined){reservationmode=g.value}}if(!reservationmode){reservationmode="reservation"}if(reservationmode=="reservation"&&activitydate==""){alert("Please select activity date");return false}var b=false;var d=0;for(var f in guestCountMap){if(!guestCountMap.hasOwnProperty(f)){continue}var c=guestCountMap[f];if(!checkpositivenumber(c)){continue}if(parseInt(c)!=0){d++}}if(0==d){b=true}if(b||!checkpositivenumber(seats1)||!checkpositivenumber(seats2)||!checkpositivenumber(seats3)||!checkpositivenumber(seats4)||!checkpositivenumber(seats5)||(d==0&&parseInt(seats1)==0&&parseInt(seats2)==0&&parseInt(seats3)==0&&parseInt(seats4)==0&&parseInt(seats5)==0)){alert("Please enter valid guests number(s)");return false}if(d>5){alert("Sorry, you can't order seats for more than 5 different guest types");return false}for(var a in upgradeCountMap){if(!upgradeCountMap.hasOwnProperty(a)){continue}var e=upgradeCountMap[a];if(!checkpositivenumber(e)){alert("Please enter valid upgrades number(s)");return false}}return true}function purchase(b){var a=baseurl+"externalservlet?action=EXTERNALPURCHASEPAGE"+(ismobileapp?"&mobileapp=1":"")+(isIframe?"&iframe=1":"")+"&mode="+reservationmode+query+external_additionalQueryParams()+"&transportationpreselected="+b;if(ismobileapp||isIframe){window.document.location=a}else{if(typeof pageTracker=="undefined"){window.opener.document.location=a}else{window.opener.document.location=pageTracker._getLinkerUrl(a)}window.close()}}function replacePage(b,a){jQuery("body").html(b).css(a)}window.A3HE=(function register_a3h_listener(){if(window.A3HE){return window.A3HE}function a(m,l){l=l||{};var n=document.createElement(m);for(var k in l){if(l.hasOwnProperty(k)){n[k]=l[k]}}return n}function g(){var m=document.getElementById("external-purchase-frame-container");if(m){return}var k=a("DIV",{id:"external-purchase-frame-container"});var l=a("LINK",{rel:"stylesheet",href:baseurl+"external/style/iframe.css"});k.appendChild(l);l=a("DIV",{id:"close"});l.innerHTML='<a onclick="A3HE.close()">&times;</a>';k.appendChild(l);l=a("DIV",{id:"shadow"});k.appendChild(l);document.body.appendChild(k)}function d(n){g();var l=n.url;var k=document.getElementById("external-purchase-frame-container");if(!k){return}if(l.indexOf("iframe=")==-1){l=l+(l.indexOf("?")===-1?"?":"&")+"iframe=1"}var m=document.getElementById("external-purchase-frame-container-iframe");k.className="showing";document.body.style.overflow="hidden";document.documentElement.style.overflow="hidden";if(!m){m=a("IFRAME",{id:"external-purchase-frame-container-iframe",frameBorder:0,border:0,width:"100%",src:l});m.style.opacity=0;k.appendChild(m)}else{m.style.opacity=0;m.src=l}}function i(m){m=m||{};var k=document.getElementById("external-purchase-frame-container"),l=document.getElementById("external-purchase-frame-container-iframe");if(!k){return}k.className="";if(l){k.removeChild(l)}document.body.style.overflow="";document.documentElement.style.overflow="";if(m.returnUrl){window.location.href=m.returnUrl}}function h(l){var k=document.getElementById("external-purchase-frame-container-iframe");if(k){k.style.opacity=""}}var b=!window.JSON||!window.addEventListener;if(b){return null}var e={};e["a3h:close"]=i;e["a3h:show"]=h;var j=window.addEventListener?"addEventListener":"attachEvent",f=window[j],c=j=="attachEvent"?"onmessage":"message";f(c,function(m){if(m.origin!=="https://www.hawaiifun.org"){return}try{var l=JSON.parse(m.message||m.data),k;if(l&&l.event){k=e[l.event]}if(k){k(l)}}catch(m){}},false);return{open:d,close:i}})();window.A3H=(function(){if(window.A3H){return window.A3H}function b(e){var d=window.opener||window.parent;d.postMessage(JSON.stringify(e),"*")}function c(d){b({event:"a3h:close",returnUrl:d})}function a(){b({event:"a3h:show"})}return{close:c,show:a}})();